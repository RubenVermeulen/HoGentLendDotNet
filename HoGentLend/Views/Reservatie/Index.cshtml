
@model IEnumerable<HoGentLend.ViewModels.ReservatieViewModel>
@using System.Linq

@{
    ViewBag.Title = "Index";
}

<h2>Reservaties</h2>

<p>Dit zijn al uw reservaties. U kan een reservatie annuleren indien u ze nog niet afgehaald hebt. U kan ook de details van een reservatie bekijken door op details te klikken.</p>
<hr />

<div id="reservationlist">


    @if (!Model.Any())
    {
        <p>Je hebt nog niets gereserveerd!</p>
    }
    else
    {

        using (Html.BeginForm("Remove", "Reservatie", FormMethod.Post))
        {
           


            int i = 1;
            foreach (var item in Model)
            {

                <div class="row reservation-item">
                    <div class="col-md-12">
                        <div class="col-md-1">
                            @i
                        </div>
                        <div class="col-md-2">
                            <strong>Ophaalmoment</strong> <br/> @Html.DisplayFor(model => item.Ophaalmoment)
                        </div>
                        <div class="col-md-2">
                            <strong>Indienmoment</strong> <br/> @Html.DisplayFor(model => item.Indienmoment)
                        </div>
                        <div class="col-md-3">
                            @{ int j = 0;}
                            @foreach (var reservatielijn in item.ReservatieLijnen)
                            {
                                if (j > 0)
                                {
                                    <text>, </text>
                                }
                                <span>@Html.ActionLink(reservatielijn.Materiaal.Name, "Detail", "Catalogus", new {id = reservatielijn.Materiaal.Id}, null) (@(reservatielijn.Amount))</span>


                                j++;
                            }
                        </div>
                        <div class="col-md-2">
                            <strong>Status</strong> <br/>
                            @if (item.Opgehaald)
                            {
                                @:Opgehaald
                            }
                            else if (item.Conflict)
                            {
                                <span class="text-danger">Conflict!</span>
                            }
                            else
                            {
                                @:Niet opgehaald
                            }

                        </div>
                        <div class="col-md-1">
                            @Html.ActionLink("Details", "Detail", "Reservatie", new {id = item.Id}, new {@class = "btn btn-default"})
                        </div>
                        <div class="col-md-1">
                            <button type="submit" class="btn btn-default" @(item.Opgehaald ? "disabled" : "")>
                                Annuleer
                            </button>

                        </div>
                        <input type="hidden" name="reservatieId" value="@item.Id"/>
                    </div>
                </div>
                <hr/>
                i++;
            

        }

    }
    }
</div>




